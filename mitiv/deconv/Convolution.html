<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>Convolution</title>
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Convolution";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>PREV CLASS</li>
<li><a href="../../mitiv/deconv/ConvolutionOperator.html" title="class in mitiv.deconv"><span class="strong">NEXT CLASS</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?mitiv/deconv/Convolution.html" target="_top">FRAMES</a></li>
<li><a href="Convolution.html" target="_top">NO FRAMES</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>SUMMARY:&nbsp;</li>
<li>NESTED&nbsp;|&nbsp;</li>
<li><a href="#field_summary">FIELD</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">CONSTR</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">METHOD</a></li>
</ul>
<ul class="subNavList">
<li>DETAIL:&nbsp;</li>
<li><a href="#field_detail">FIELD</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">CONSTR</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">METHOD</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<p class="subTitle">mitiv.deconv</p>
<h2 title="Class Convolution" class="title">Class Convolution</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../../mitiv/linalg/LinearOperator.html" title="class in mitiv.linalg">mitiv.linalg.LinearOperator</a></li>
<li>
<ul class="inheritance">
<li><a href="../../mitiv/linalg/shaped/ShapedLinearOperator.html" title="class in mitiv.linalg.shaped">mitiv.linalg.shaped.ShapedLinearOperator</a></li>
<li>
<ul class="inheritance">
<li>mitiv.deconv.Convolution</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../mitiv/base/Traits.html" title="interface in mitiv.base">Traits</a></dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../mitiv/deconv/impl/ConvolutionDouble.html" title="class in mitiv.deconv.impl">ConvolutionDouble</a>, <a href="../../mitiv/deconv/impl/ConvolutionFloat.html" title="class in mitiv.deconv.impl">ConvolutionFloat</a></dd>
</dl>
<hr>
<br>
<pre>public abstract class <strong>Convolution</strong>
extends <a href="../../mitiv/linalg/shaped/ShapedLinearOperator.html" title="class in mitiv.linalg.shaped">ShapedLinearOperator</a></pre>
<div class="block">This class implements a linear operator to apply the convolution.

 <p>
 The convolution operator <b>H</b> writes:
 </p>
 <p align="center">
 <b>H</b> =
 <b>R</b>.<b>F</b><sup>*</sup>.diag(<b>F</b>.<b><i>h</i></b>).<b>F</b>
 </p>
 <p>
 with <b>F</b> the FFT (Fast Fourier Transform) operator, <b><i>h</i></b> the
 point spread function (PSF) and <b>R</b> a linear operator which selects a
 sub-region of the output of the convolution. The * superscript denotes the
 adjoint of the operator (complex transpose in this specific case) and
 diag(<i><b>v</i></b>) is a diagonal operator whose diagonal elements are
 those of the vector <i><b>v</i></b>.
 </p>
 <p>
 The vector space of the operator is that of the arguments of the
 convolution.  Currently only 1D, 2D or 3D arguments of type float
 or double are supported.
 </p><p>
 A convolution operator provides methods to perform the convolution
 but also to apply the forward or backward FFT -- see
 <a href="../../mitiv/deconv/Convolution.html#forwardFFT()"><code>forwardFFT()</code></a> and <a href="../../mitiv/deconv/Convolution.html#backwardFFT()"><code>backwardFFT()</code></a>.
 </p></div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>Éric Thiébaut.</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><strong><a href="../../mitiv/deconv/Convolution.html#number">number</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../mitiv/utils/Timer.html" title="class in mitiv.utils">Timer</a></code></td>
<td class="colLast"><code><strong><a href="../../mitiv/deconv/Convolution.html#timer">timer</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../mitiv/utils/Timer.html" title="class in mitiv.utils">Timer</a></code></td>
<td class="colLast"><code><strong><a href="../../mitiv/deconv/Convolution.html#timerForFFT">timerForFFT</a></strong></code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_mitiv.linalg.LinearOperator">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;mitiv.linalg.<a href="../../mitiv/linalg/LinearOperator.html" title="class in mitiv.linalg">LinearOperator</a></h3>
<code><a href="../../mitiv/linalg/LinearOperator.html#ADJOINT">ADJOINT</a>, <a href="../../mitiv/linalg/LinearOperator.html#ADJOINT_INVERSE">ADJOINT_INVERSE</a>, <a href="../../mitiv/linalg/LinearOperator.html#DIRECT">DIRECT</a>, <a href="../../mitiv/linalg/LinearOperator.html#inputSpace">inputSpace</a>, <a href="../../mitiv/linalg/LinearOperator.html#INVERSE">INVERSE</a>, <a href="../../mitiv/linalg/LinearOperator.html#INVERSE_ADJOINT">INVERSE_ADJOINT</a>, <a href="../../mitiv/linalg/LinearOperator.html#outputSpace">outputSpace</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_mitiv.base.Traits">
<!--   -->
</a>
<h3>Fields inherited from interface&nbsp;mitiv.base.<a href="../../mitiv/base/Traits.html" title="interface in mitiv.base">Traits</a></h3>
<code><a href="../../mitiv/base/Traits.html#BIG_ENDIAN">BIG_ENDIAN</a>, <a href="../../mitiv/base/Traits.html#BOOLEAN">BOOLEAN</a>, <a href="../../mitiv/base/Traits.html#BYTE">BYTE</a>, <a href="../../mitiv/base/Traits.html#CHAR">CHAR</a>, <a href="../../mitiv/base/Traits.html#classes">classes</a>, <a href="../../mitiv/base/Traits.html#DBL_EPSILON">DBL_EPSILON</a>, <a href="../../mitiv/base/Traits.html#DOUBLE">DOUBLE</a>, <a href="../../mitiv/base/Traits.html#FIRST_NUMERIC">FIRST_NUMERIC</a>, <a href="../../mitiv/base/Traits.html#FLOAT">FLOAT</a>, <a href="../../mitiv/base/Traits.html#FLT_EPSILON">FLT_EPSILON</a>, <a href="../../mitiv/base/Traits.html#INT">INT</a>, <a href="../../mitiv/base/Traits.html#isNumeric">isNumeric</a>, <a href="../../mitiv/base/Traits.html#LAST_NUMERIC">LAST_NUMERIC</a>, <a href="../../mitiv/base/Traits.html#LITTLE_ENDIAN">LITTLE_ENDIAN</a>, <a href="../../mitiv/base/Traits.html#LONG">LONG</a>, <a href="../../mitiv/base/Traits.html#names">names</a>, <a href="../../mitiv/base/Traits.html#NATIVE_BYTE_ORDER">NATIVE_BYTE_ORDER</a>, <a href="../../mitiv/base/Traits.html#OBJECT">OBJECT</a>, <a href="../../mitiv/base/Traits.html#SHORT">SHORT</a>, <a href="../../mitiv/base/Traits.html#sizes">sizes</a>, <a href="../../mitiv/base/Traits.html#suffixes">suffixes</a>, <a href="../../mitiv/base/Traits.html#UNKNOWN_BYTE_ORDER">UNKNOWN_BYTE_ORDER</a>, <a href="../../mitiv/base/Traits.html#VOID">VOID</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier</th>
<th class="colLast" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected </code></td>
<td class="colLast"><code><strong><a href="../../mitiv/deconv/Convolution.html#Convolution(mitiv.linalg.shaped.ShapedVectorSpace)">Convolution</a></strong>(<a href="../../mitiv/linalg/shaped/ShapedVectorSpace.html" title="class in mitiv.linalg.shaped">ShapedVectorSpace</a>&nbsp;space)</code>
<div class="block">The following constructor make this class non instantiable, but still
 let others inherit from this class.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected </code></td>
<td class="colLast"><code><strong><a href="../../mitiv/deconv/Convolution.html#Convolution(mitiv.linalg.shaped.ShapedVectorSpace, mitiv.linalg.shaped.ShapedVectorSpace)">Convolution</a></strong>(<a href="../../mitiv/linalg/shaped/ShapedVectorSpace.html" title="class in mitiv.linalg.shaped">ShapedVectorSpace</a>&nbsp;inp,
           <a href="../../mitiv/linalg/shaped/ShapedVectorSpace.html" title="class in mitiv.linalg.shaped">ShapedVectorSpace</a>&nbsp;out)</code>
<div class="block">The following constructor make this class non instantiable, but still
 let others inherit from this class.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../mitiv/array/ShapedArray.html" title="interface in mitiv.array">ShapedArray</a></code></td>
<td class="colLast"><code><strong><a href="../../mitiv/deconv/Convolution.html#adjustPSF(mitiv.array.ShapedArray, int[])">adjustPSF</a></strong>(<a href="../../mitiv/array/ShapedArray.html" title="interface in mitiv.array">ShapedArray</a>&nbsp;psf,
         int[]&nbsp;off)</code>
<div class="block">Helper function to zero-pad and roll the PSF.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>abstract void</code></td>
<td class="colLast"><code><strong><a href="../../mitiv/deconv/Convolution.html#backwardFFT()">backwardFFT</a></strong>()</code>
<div class="block">Perform in-place backward FFT on the internal workspace.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../mitiv/deconv/Convolution.html" title="class in mitiv.deconv">Convolution</a></code></td>
<td class="colLast"><code><strong><a href="../../mitiv/deconv/Convolution.html#build(mitiv.linalg.shaped.ShapedVectorSpace)">build</a></strong>(<a href="../../mitiv/linalg/shaped/ShapedVectorSpace.html" title="class in mitiv.linalg.shaped">ShapedVectorSpace</a>&nbsp;space)</code>
<div class="block">Build a convolution operator.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="../../mitiv/deconv/Convolution.html" title="class in mitiv.deconv">Convolution</a></code></td>
<td class="colLast"><code><strong><a href="../../mitiv/deconv/Convolution.html#build(mitiv.linalg.shaped.ShapedVectorSpace, mitiv.linalg.shaped.ShapedVectorSpace)">build</a></strong>(<a href="../../mitiv/linalg/shaped/ShapedVectorSpace.html" title="class in mitiv.linalg.shaped">ShapedVectorSpace</a>&nbsp;inp,
     <a href="../../mitiv/linalg/shaped/ShapedVectorSpace.html" title="class in mitiv.linalg.shaped">ShapedVectorSpace</a>&nbsp;out)</code>
<div class="block">Build a convolution operator with centered output.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../mitiv/deconv/Convolution.html" title="class in mitiv.deconv">Convolution</a></code></td>
<td class="colLast"><code><strong><a href="../../mitiv/deconv/Convolution.html#build(mitiv.linalg.shaped.ShapedVectorSpace, mitiv.linalg.shaped.ShapedVectorSpace, int[])">build</a></strong>(<a href="../../mitiv/linalg/shaped/ShapedVectorSpace.html" title="class in mitiv.linalg.shaped">ShapedVectorSpace</a>&nbsp;inp,
     <a href="../../mitiv/linalg/shaped/ShapedVectorSpace.html" title="class in mitiv.linalg.shaped">ShapedVectorSpace</a>&nbsp;out,
     int[]&nbsp;off)</code>
<div class="block">Build a convolution operator.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int[]</code></td>
<td class="colLast"><code><strong><a href="../../mitiv/deconv/Convolution.html#center(mitiv.base.Shape)">center</a></strong>(<a href="../../mitiv/base/Shape.html" title="class in mitiv.base">Shape</a>&nbsp;shape)</code>
<div class="block">Compute offset of array center.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>abstract void</code></td>
<td class="colLast"><code><strong><a href="../../mitiv/deconv/Convolution.html#convolve(boolean)">convolve</a></strong>(boolean&nbsp;adjoint)</code>
<div class="block">Apply the operator to the internal workspace.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>abstract void</code></td>
<td class="colLast"><code><strong><a href="../../mitiv/deconv/Convolution.html#forwardFFT()">forwardFFT</a></strong>()</code>
<div class="block">Perform in-place forward FFT on the internal workspace.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><strong><a href="../../mitiv/deconv/Convolution.html#getElapsedTime()">getElapsedTime</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><strong><a href="../../mitiv/deconv/Convolution.html#getElapsedTimeInFFT()">getElapsedTimeInFFT</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../mitiv/deconv/Convolution.html#getNumber()">getNumber</a></strong>()</code>
<div class="block">Get the number of elements of the argument of the convolution.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../mitiv/deconv/Convolution.html#getRank()">getRank</a></strong>()</code>
<div class="block">Retrieve the rank of the convolution.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../mitiv/deconv/Convolution.html#getType()">getType</a></strong>()</code>
<div class="block">Retrieve the type of the elements of the argument of the convolution.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../mitiv/deconv/Convolution.html#privApply(mitiv.linalg.Vector, mitiv.linalg.Vector, int)">privApply</a></strong>(<a href="../../mitiv/linalg/Vector.html" title="class in mitiv.linalg">Vector</a>&nbsp;src,
         <a href="../../mitiv/linalg/Vector.html" title="class in mitiv.linalg">Vector</a>&nbsp;dst,
         int&nbsp;job)</code>
<div class="block">Apply a linear operator (or its adjoint) to a vector.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>abstract void</code></td>
<td class="colLast"><code><strong><a href="../../mitiv/deconv/Convolution.html#pull(mitiv.linalg.shaped.ShapedVector)">pull</a></strong>(<a href="../../mitiv/linalg/shaped/ShapedVector.html" title="class in mitiv.linalg.shaped">ShapedVector</a>&nbsp;out)</code>
<div class="block">Retrieve the result of the convolution.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>abstract void</code></td>
<td class="colLast"><code><strong><a href="../../mitiv/deconv/Convolution.html#push(mitiv.linalg.shaped.ShapedVector)">push</a></strong>(<a href="../../mitiv/linalg/shaped/ShapedVector.html" title="class in mitiv.linalg.shaped">ShapedVector</a>&nbsp;inp)</code>
<div class="block">Copy data to the internal workspace.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../mitiv/deconv/Convolution.html#resetTimers()">resetTimers</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../mitiv/deconv/Convolution.html#setPSF(mitiv.array.ShapedArray)">setPSF</a></strong>(<a href="../../mitiv/array/ShapedArray.html" title="interface in mitiv.array">ShapedArray</a>&nbsp;arr)</code>
<div class="block">Set the PSF of the operator.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>abstract void</code></td>
<td class="colLast"><code><strong><a href="../../mitiv/deconv/Convolution.html#setPSF(mitiv.array.ShapedArray, int[])">setPSF</a></strong>(<a href="../../mitiv/array/ShapedArray.html" title="interface in mitiv.array">ShapedArray</a>&nbsp;arr,
      int[]&nbsp;off)</code>
<div class="block">Set the PSF of the operator with given center coordinates.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>abstract void</code></td>
<td class="colLast"><code><strong><a href="../../mitiv/deconv/Convolution.html#setPSF(mitiv.linalg.shaped.ShapedVector)">setPSF</a></strong>(<a href="../../mitiv/linalg/shaped/ShapedVector.html" title="class in mitiv.linalg.shaped">ShapedVector</a>&nbsp;vec)</code>
<div class="block">Set the PSF of the operator.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_mitiv.linalg.shaped.ShapedLinearOperator">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;mitiv.linalg.shaped.<a href="../../mitiv/linalg/shaped/ShapedLinearOperator.html" title="class in mitiv.linalg.shaped">ShapedLinearOperator</a></h3>
<code><a href="../../mitiv/linalg/shaped/ShapedLinearOperator.html#getInputSpace()">getInputSpace</a>, <a href="../../mitiv/linalg/shaped/ShapedLinearOperator.html#getOutputSpace()">getOutputSpace</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_mitiv.linalg.LinearOperator">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;mitiv.linalg.<a href="../../mitiv/linalg/LinearOperator.html" title="class in mitiv.linalg">LinearOperator</a></h3>
<code><a href="../../mitiv/linalg/LinearOperator.html#apply(mitiv.linalg.Vector, mitiv.linalg.Vector)">apply</a>, <a href="../../mitiv/linalg/LinearOperator.html#apply(mitiv.linalg.Vector, mitiv.linalg.Vector, int)">apply</a>, <a href="../../mitiv/linalg/LinearOperator.html#checkAdjoint(mitiv.linalg.Vector, mitiv.linalg.Vector)">checkAdjoint</a>, <a href="../../mitiv/linalg/LinearOperator.html#checkLinearProblem(mitiv.linalg.LinearOperator, mitiv.linalg.Vector, mitiv.linalg.Vector, boolean)">checkLinearProblem</a>, <a href="../../mitiv/linalg/LinearOperator.html#isEndomorphism()">isEndomorphism</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="number">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>number</h4>
<pre>protected final&nbsp;int number</pre>
</li>
</ul>
<a name="timerForFFT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>timerForFFT</h4>
<pre>protected&nbsp;<a href="../../mitiv/utils/Timer.html" title="class in mitiv.utils">Timer</a> timerForFFT</pre>
</li>
</ul>
<a name="timer">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>timer</h4>
<pre>protected&nbsp;<a href="../../mitiv/utils/Timer.html" title="class in mitiv.utils">Timer</a> timer</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="Convolution(mitiv.linalg.shaped.ShapedVectorSpace)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>Convolution</h4>
<pre>protected&nbsp;Convolution(<a href="../../mitiv/linalg/shaped/ShapedVectorSpace.html" title="class in mitiv.linalg.shaped">ShapedVectorSpace</a>&nbsp;space)</pre>
<div class="block">The following constructor make this class non instantiable, but still
 let others inherit from this class.  You must use the <code>#build()</code>
 factory to build a convolution operator.</div>
</li>
</ul>
<a name="Convolution(mitiv.linalg.shaped.ShapedVectorSpace, mitiv.linalg.shaped.ShapedVectorSpace)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Convolution</h4>
<pre>protected&nbsp;Convolution(<a href="../../mitiv/linalg/shaped/ShapedVectorSpace.html" title="class in mitiv.linalg.shaped">ShapedVectorSpace</a>&nbsp;inp,
           <a href="../../mitiv/linalg/shaped/ShapedVectorSpace.html" title="class in mitiv.linalg.shaped">ShapedVectorSpace</a>&nbsp;out)</pre>
<div class="block">The following constructor make this class non instantiable, but still
 let others inherit from this class.  You must use the <code>#build()</code>
 factory to build a convolution operator.</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getRank()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRank</h4>
<pre>public final&nbsp;int&nbsp;getRank()</pre>
<div class="block">Retrieve the rank of the convolution.</div>
</li>
</ul>
<a name="getType()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getType</h4>
<pre>public final&nbsp;int&nbsp;getType()</pre>
<div class="block">Retrieve the type of the elements of the argument of the convolution.</div>
</li>
</ul>
<a name="getNumber()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNumber</h4>
<pre>public final&nbsp;int&nbsp;getNumber()</pre>
<div class="block">Get the number of elements of the argument of the convolution.</div>
</li>
</ul>
<a name="build(mitiv.linalg.shaped.ShapedVectorSpace)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>build</h4>
<pre>public static&nbsp;<a href="../../mitiv/deconv/Convolution.html" title="class in mitiv.deconv">Convolution</a>&nbsp;build(<a href="../../mitiv/linalg/shaped/ShapedVectorSpace.html" title="class in mitiv.linalg.shaped">ShapedVectorSpace</a>&nbsp;space)</pre>
<div class="block">Build a convolution operator.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>space</code> - - The input and output spaces.</dd>
<dt><span class="strong">Returns:</span></dt><dd>A new convolution operator.  The returned object is not a
         valid operator until the point spread function (PSF) is set
         with one of the <code>#setPSF()</code> methods.</dd></dl>
</li>
</ul>
<a name="build(mitiv.linalg.shaped.ShapedVectorSpace, mitiv.linalg.shaped.ShapedVectorSpace)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>build</h4>
<pre>public static&nbsp;<a href="../../mitiv/deconv/Convolution.html" title="class in mitiv.deconv">Convolution</a>&nbsp;build(<a href="../../mitiv/linalg/shaped/ShapedVectorSpace.html" title="class in mitiv.linalg.shaped">ShapedVectorSpace</a>&nbsp;inp,
                <a href="../../mitiv/linalg/shaped/ShapedVectorSpace.html" title="class in mitiv.linalg.shaped">ShapedVectorSpace</a>&nbsp;out)</pre>
<div class="block">Build a convolution operator with centered output.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>inp</code> - - The input space.</dd><dd><code>out</code> - - The output space.</dd>
<dt><span class="strong">Returns:</span></dt><dd>A new convolution operator.  The returned object is not a
         valid operator until the point spread function (PSF) is set
         with one of the <code>#setPSF()</code> methods.</dd></dl>
</li>
</ul>
<a name="build(mitiv.linalg.shaped.ShapedVectorSpace, mitiv.linalg.shaped.ShapedVectorSpace, int[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>build</h4>
<pre>public static&nbsp;<a href="../../mitiv/deconv/Convolution.html" title="class in mitiv.deconv">Convolution</a>&nbsp;build(<a href="../../mitiv/linalg/shaped/ShapedVectorSpace.html" title="class in mitiv.linalg.shaped">ShapedVectorSpace</a>&nbsp;inp,
                <a href="../../mitiv/linalg/shaped/ShapedVectorSpace.html" title="class in mitiv.linalg.shaped">ShapedVectorSpace</a>&nbsp;out,
                int[]&nbsp;off)</pre>
<div class="block">Build a convolution operator.
 <p>
 This version of the factory for building a convolution operator
 let you specify precisely the position of the region corresponding to the
 output in the result of the convolution. The offsets of this region must be
 such that:

 <pre>
 0 &lt;= off[k] &lt;= inpDim[k] - outDim[k]
 </pre>

 where <code>inpDim</code> and <code>outDim</code> are the respective dimensions of
 the input and output spaces. If this does not hold (for all <i>k</i>),
 an <code>ArrayIndexOutOfBoundsException</code> is thrown.
 </p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>inp</code> - - The input space.</dd><dd><code>out</code> - - The output space.</dd><dd><code>off</code> - - The relative position of the output with respect to the
              result of the cyclic convolution. It must have as many
              values as the rank of the input and output spaces of the
              operator.</dd>
<dt><span class="strong">Returns:</span></dt><dd>A convolution operator.</dd><dt><span class="strong">See Also:</span></dt><dd><code>#build(ShapedVectorSpace, ShapedVectorSpace)}</code></dd></dl>
</li>
</ul>
<a name="forwardFFT()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>forwardFFT</h4>
<pre>public abstract&nbsp;void&nbsp;forwardFFT()</pre>
<div class="block">Perform in-place forward FFT on the internal workspace.</div>
</li>
</ul>
<a name="backwardFFT()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>backwardFFT</h4>
<pre>public abstract&nbsp;void&nbsp;backwardFFT()</pre>
<div class="block">Perform in-place backward FFT on the internal workspace.</div>
</li>
</ul>
<a name="push(mitiv.linalg.shaped.ShapedVector)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>push</h4>
<pre>public abstract&nbsp;void&nbsp;push(<a href="../../mitiv/linalg/shaped/ShapedVector.html" title="class in mitiv.linalg.shaped">ShapedVector</a>&nbsp;inp)</pre>
<div class="block">Copy data to the internal workspace.

 This operation should be done before calling the <a href="../../mitiv/deconv/Convolution.html#convolve(boolean)"><code>convolve(boolean)</code></a>
 method.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>inp</code> - - The source vector to copy to the internal workspace.</dd></dl>
</li>
</ul>
<a name="pull(mitiv.linalg.shaped.ShapedVector)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>pull</h4>
<pre>public abstract&nbsp;void&nbsp;pull(<a href="../../mitiv/linalg/shaped/ShapedVector.html" title="class in mitiv.linalg.shaped">ShapedVector</a>&nbsp;out)</pre>
<div class="block">Retrieve the result of the convolution.

 After calling the <a href="../../mitiv/deconv/Convolution.html#convolve(boolean)"><code>convolve(boolean)</code></a> method, this operation extracts the
 real part of the internal workspace for the output region and scales
 the values.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>out</code> - - The destination vector to store the real part of the internal
            workspace.</dd></dl>
</li>
</ul>
<a name="convolve(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>convolve</h4>
<pre>public abstract&nbsp;void&nbsp;convolve(boolean&nbsp;adjoint)</pre>
<div class="block">Apply the operator to the internal workspace.

 <p>
 The linear operator which implements the convolution performs the
 following operations:

 <pre>
 push(src);
 convolve(adjoint);
 pull(dst);
 </pre>

 where <b>src</b> is the source vector, <b>dst</b> is the destination
 vector, and <b>adjoint</b> is true to apply the adjoint of the operator.
 </p>
 <p>
 This splitting is intended to implement other operators or classes on top
 of the convolution operator.
 <p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>adjoint</code> - - Apply the adjoint of the operator if true.</dd></dl>
</li>
</ul>
<a name="setPSF(mitiv.linalg.shaped.ShapedVector)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setPSF</h4>
<pre>public abstract&nbsp;void&nbsp;setPSF(<a href="../../mitiv/linalg/shaped/ShapedVector.html" title="class in mitiv.linalg.shaped">ShapedVector</a>&nbsp;vec)</pre>
<div class="block">Set the PSF of the operator.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>vec</code> - - The PSF must belongs to the input space of the operator
              and must be centered in the sense of of the FFT.</dd></dl>
</li>
</ul>
<a name="center(mitiv.base.Shape)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>center</h4>
<pre>public static&nbsp;int[]&nbsp;center(<a href="../../mitiv/base/Shape.html" title="class in mitiv.base">Shape</a>&nbsp;shape)</pre>
<div class="block">Compute offset of array center.

 The center is at offset shape.dimension(k)/2 along each dimension k.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>shape</code> - - The dimensions of the array.</dd></dl>
</li>
</ul>
<a name="setPSF(mitiv.array.ShapedArray)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setPSF</h4>
<pre>public&nbsp;void&nbsp;setPSF(<a href="../../mitiv/array/ShapedArray.html" title="interface in mitiv.array">ShapedArray</a>&nbsp;arr)</pre>
<div class="block">Set the PSF of the operator.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>arr</code> - - The PSF in the form of a shaped array.  It is
              automatically converted to the correct data type,
              zero-padded and rolled.  It is assumed to be
              geometrically centered (i.e. the center of the PSF
              is at offset dim/2 along each dimension).</dd></dl>
</li>
</ul>
<a name="setPSF(mitiv.array.ShapedArray, int[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setPSF</h4>
<pre>public abstract&nbsp;void&nbsp;setPSF(<a href="../../mitiv/array/ShapedArray.html" title="interface in mitiv.array">ShapedArray</a>&nbsp;arr,
          int[]&nbsp;off)</pre>
<div class="block">Set the PSF of the operator with given center coordinates.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>arr</code> - - The PSF in the form of a shaped array.  It is
              automatically converted to the correct data type,
              zero-padded and rolled.</dd><dd><code>off</code> - - The offsets of the central element of the PSF.
              There must be as many elements as the rank of
              the PSF, each element is the 0-based offset of
              the center along the corresponding dimension.</dd></dl>
</li>
</ul>
<a name="adjustPSF(mitiv.array.ShapedArray, int[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>adjustPSF</h4>
<pre>protected&nbsp;<a href="../../mitiv/array/ShapedArray.html" title="interface in mitiv.array">ShapedArray</a>&nbsp;adjustPSF(<a href="../../mitiv/array/ShapedArray.html" title="interface in mitiv.array">ShapedArray</a>&nbsp;psf,
                    int[]&nbsp;off)</pre>
<div class="block">Helper function to zero-pad and roll the PSF.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>psf</code> - - The PSF as a shaped array.</dd><dd><code>off</code> - - The offsets of the central element of the PSF.
              There must be as many elements as the rank of
              the PSF, each element is the 0-based offset of
              the center along the corresponding dimension.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The PSF zero padded and appropriately rolled for the
         FFT.</dd></dl>
</li>
</ul>
<a name="privApply(mitiv.linalg.Vector, mitiv.linalg.Vector, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>privApply</h4>
<pre>protected&nbsp;void&nbsp;privApply(<a href="../../mitiv/linalg/Vector.html" title="class in mitiv.linalg">Vector</a>&nbsp;src,
             <a href="../../mitiv/linalg/Vector.html" title="class in mitiv.linalg">Vector</a>&nbsp;dst,
             int&nbsp;job)</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../mitiv/linalg/LinearOperator.html#privApply(mitiv.linalg.Vector, mitiv.linalg.Vector, int)">LinearOperator</a></code></strong></div>
<div class="block">Apply a linear operator (or its adjoint) to a vector.

 This protected method is called by the "apply" method after checking of
 the arguments.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../mitiv/linalg/LinearOperator.html#privApply(mitiv.linalg.Vector, mitiv.linalg.Vector, int)">privApply</a></code>&nbsp;in class&nbsp;<code><a href="../../mitiv/linalg/LinearOperator.html" title="class in mitiv.linalg">LinearOperator</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>src</code> - - The source vector.</dd><dd><code>dst</code> - - The destination vector.</dd><dd><code>job</code> - - The type of operation to perform (<a href="../../mitiv/linalg/LinearOperator.html#DIRECT"><code>LinearOperator.DIRECT</code></a>,
              <a href="../../mitiv/linalg/LinearOperator.html#ADJOINT"><code>LinearOperator.ADJOINT</code></a>, <code>INVERSE</code> or
              <code>INVERSE_ADJOINT</code>).</dd></dl>
</li>
</ul>
<a name="resetTimers()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>resetTimers</h4>
<pre>public&nbsp;void&nbsp;resetTimers()</pre>
</li>
</ul>
<a name="getElapsedTime()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getElapsedTime</h4>
<pre>public&nbsp;double&nbsp;getElapsedTime()</pre>
</li>
</ul>
<a name="getElapsedTimeInFFT()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getElapsedTimeInFFT</h4>
<pre>public&nbsp;double&nbsp;getElapsedTimeInFFT()</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>PREV CLASS</li>
<li><a href="../../mitiv/deconv/ConvolutionOperator.html" title="class in mitiv.deconv"><span class="strong">NEXT CLASS</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?mitiv/deconv/Convolution.html" target="_top">FRAMES</a></li>
<li><a href="Convolution.html" target="_top">NO FRAMES</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>SUMMARY:&nbsp;</li>
<li>NESTED&nbsp;|&nbsp;</li>
<li><a href="#field_summary">FIELD</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">CONSTR</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">METHOD</a></li>
</ul>
<ul class="subNavList">
<li>DETAIL:&nbsp;</li>
<li><a href="#field_detail">FIELD</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">CONSTR</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">METHOD</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
